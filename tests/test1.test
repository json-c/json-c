#!/bin/sh

# Common definitions
if test -z "$srcdir"; then
    srcdir="${0%/*}"
    test "$srcdir" = "$0" && srcdir=.
    test -z "$srcdir" && srcdir=.
fi
. "$srcdir/test-defs.sh"

run_output_test test1
_err=$?

for flag in plain spaced pretty compact_array ; do
	run_output_test -o test1Formatted_${flag} test1Formatted ${flag}
	_err2=$?
	if [ $_err -eq 0 ] ; then
		_err=$_err2
	fi
done

# Spaced and pretty JSON string
run_output_test -o test1Formatted_spaced_pretty \
					test1Formatted spaced pretty
_err2=$?
if [ $_err -eq 0 ] ; then
	_err=$_err2
fi

# Spaced and pretty JSON string using tabs
run_output_test -o test1Formatted_spaced_pretty_pretty_tab \
					test1Formatted spaced pretty pretty_tab
_err2=$?
if [ $_err -eq 0 ] ; then
	_err=$_err2
fi

exit $_err
